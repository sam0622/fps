[gd_scene load_steps=17 format=3 uid="uid://43b4m1bee8c"]

[ext_resource type="Script" uid="uid://82qqrw7q456g" path="res://src/scripts/chaser.gd" id="1_qc0cy"]
[ext_resource type="PackedScene" uid="uid://f07kuw883qs6" path="res://src/scenes/enemies/chaser/dead_chaser.tscn" id="2_5jmu7"]
[ext_resource type="PackedScene" uid="uid://dftfq0kemcosa" path="res://assets/models/Human.blend" id="3_8vwep"]
[ext_resource type="ArrayMesh" uid="uid://dvh7gws2j8as4" path="res://assets/models/Human_Cube_002.res" id="4_2b05q"]

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_8vwep"]
points = PackedVector3Array(-0.0464477, -0.644692, -0.337124, 0.146345, -1.8652, -0.208578, -0.0464477, -0.644692, 0.176857, 0.403286, 0.319224, -0.272826, -0.0464477, 0.319224, 0.176857, 0.467533, -1.8652, -0.208578, 0.467533, -1.54382, 0.176857, 0.403286, 0.319224, 0.176857, -0.0464477, 0.319224, -0.272826, 0.146345, -1.8652, 0.112609, 0.0820475, -0.451823, -0.337124, 0.453711, -1.80645, 0.102243, 0.146345, -1.54382, 0.176857)

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_2b05q"]
points = PackedVector3Array(0.467483, -1.86525, 0.11261, 0.274841, -2.44337, -0.208629, 0.210543, -2.18637, -0.208629, 0.274841, -2.44337, 0.433848, 0.531749, -2.44337, -0.208629, 0.531749, -2.44337, 0.433848, 0.210543, -1.86525, -0.208629, 0.531749, -1.92954, -0.208629, 0.210543, -1.86525, 0.11261, 0.531749, -2.25061, 0.433848, 0.274841, -2.25061, 0.433848, 0.210543, -2.18637, 0.11261, 0.531749, -1.92954, 0.11261, 0.467483, -1.86525, -0.208629)

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_n5x8l"]
points = PackedVector3Array(-0.496137, -2.05794, 0.112609, -0.0464917, 0.319224, 0.176857, -0.0464917, 0.319224, -0.272826, -0.431871, 0.319224, 0.176857, -0.431871, 0.319224, -0.272826, -0.174981, -1.99348, -0.208578, -0.110758, -1.54393, 0.176857, -0.496137, -2.05794, -0.208578, -0.0464917, -0.644811, -0.337124, -0.174981, -1.99348, 0.112609, -0.431871, -1.54393, 0.176857, -0.110758, -1.67237, -0.208578, -0.110758, -0.516366, -0.337124, -0.239247, -2.05794, -0.208578, -0.110758, -1.67237, 0.112609, -0.110758, -0.644811, -0.337124)

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_xt3sm"]
points = PackedVector3Array(-0.496156, -2.25068, 0.433848, -0.496156, -2.44342, -0.208629, -0.239191, -2.44342, -0.208629, -0.496156, -2.05794, -0.208629, -0.239191, -2.05794, 0.11261, -0.239191, -2.44342, 0.433848, -0.560429, -2.44342, 0.369575, -0.239191, -2.05794, -0.208629, -0.496156, -2.05794, 0.11261, -0.239191, -2.25068, 0.433848, -0.560429, -2.25068, 0.11261, -0.560429, -2.25068, 0.369575, -0.560429, -2.44342, 0.11261, -0.496156, -2.44342, 0.433848)

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_sdmyv"]
points = PackedVector3Array(0.0820224, 1.66842, 0.112515, -0.367686, 0.769045, -0.272876, -0.367686, 0.769045, 0.0482739, 0.403286, 0.769045, -0.208578, -0.0464225, 1.66842, -0.208578, 0.0820224, 1.02602, 0.305352, -0.239165, 1.47554, 0.176813, 0.274765, 1.47554, 0.0482739, 0.338988, 0.769045, 0.0482739, 0.0820224, 1.5398, -0.272876, -0.239165, 1.60407, -0.0158543, 0.0820224, 1.41136, 0.305352, 0.210543, 1.60407, -0.144337, -0.110645, 1.09029, 0.305352, 0.338988, 0.833312, -0.272876, -0.0464225, 1.60407, 0.241054, -0.174943, 1.5398, -0.208578, 0.210543, 1.5398, 0.176813, 0.403286, 0.833312, -0.0158543, -0.110645, 1.66842, 0.112515, -0.0464225, 1.5398, -0.272876, -0.110645, 1.34709, 0.305352, -0.367686, 0.833312, -0.272876, 0.403286, 0.833312, -0.208578, -0.239165, 1.5398, -0.144337, -0.367686, 0.833312, 0.0482739, 0.0820224, 1.60407, 0.241054, 0.210543, 1.60407, 0.112515, -0.174943, 1.60407, 0.176813, 0.274765, 1.47554, -0.0800956, 0.338988, 0.769045, -0.272876, 0.0820224, 1.66842, -0.144337)

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_grk6a"]
points = PackedVector3Array(2.00948, 0.576158, -0.272876, -2.03812, 0.447757, -0.272876, -2.03812, 0.447757, 0.0483556, -0.44774, 0.72261, -0.175462, 1.9449, 0.447757, 0.176857, -1.97354, 0.640424, 0.176857, 2.00948, 0.640424, 0.176857, 1.30265, 0.383534, -0.272876, -1.58804, 0.383534, 0.112584, -1.84517, 0.640424, -0.272876, 1.81653, 0.640424, -0.272876, 1.62397, 0.383534, 0.112584, -0.338564, 0.369573, -0.222605, -1.90936, 0.447757, 0.176857, 2.00948, 0.447757, -0.272876, 0.405351, 0.716952, -0.0726446, -1.3313, 0.383534, -0.272876, 0.431971, 0.727914, -0.17925, -0.381927, 0.715676, -0.0235229, -2.03812, 0.576158, -0.272876, 1.62397, 0.383534, -0.208559, 0.29772, 0.71213, -0.216038, -1.58804, 0.383534, -0.208559, -2.03812, 0.576158, 0.176857, 2.00948, 0.447757, 0.0483556, 2.00948, 0.640424, 0.0483556, 0.356444, 0.371116, -0.221062, -1.97354, 0.640424, 0.0483556, 2.00948, 0.512023, 0.176857, -2.03812, 0.512023, 0.176857, -0.322167, 0.709869, -0.213776, -0.313458, 0.383089, 0.113068)

[sub_resource type="Animation" id="Animation_6lppl"]
length = 0.001

[sub_resource type="Animation" id="Animation_jyx25"]
resource_name = "attack"
length = 0.25
step = 0.25

[sub_resource type="Animation" id="Animation_qc0cy"]
resource_name = "die"
length = 0.15
step = 0.25

[sub_resource type="Animation" id="Animation_6ni2y"]
resource_name = "jump"
length = 0.25
step = 0.25

[sub_resource type="AnimationLibrary" id="AnimationLibrary_jyx25"]
_data = {
&"RESET": SubResource("Animation_6lppl"),
&"attack": SubResource("Animation_jyx25"),
&"die": SubResource("Animation_qc0cy"),
&"jump": SubResource("Animation_6ni2y")
}

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_8vwep"]
radius = 0.11534
height = 0.34888

[node name="Chaser" type="CharacterBody3D" groups=["enemy"]]
collision_layer = 15
collision_mask = 15
script = ExtResource("1_qc0cy")
health = 5
damage = 3
corpse_scene = ExtResource("2_5jmu7")
metadata/_custom_type_script = "uid://82qqrw7q456g"

[node name="Body2" parent="." instance=ExtResource("3_8vwep")]
transform = Transform3D(-0.5, 0, -4.37114e-08, 0, 0.5, 0, 4.37114e-08, 0, -0.5, 0, 0.447333, 0)
mesh = ExtResource("4_2b05q")

[node name="CollisionShape3D6" type="CollisionShape3D" parent="."]
transform = Transform3D(-0.5, 0, -4.37114e-08, 0, 0.5, 0, 4.37114e-08, 0, -0.5, 0, 0.447333, 0)
shape = SubResource("ConvexPolygonShape3D_8vwep")

[node name="CollisionShape3D5" type="CollisionShape3D" parent="."]
transform = Transform3D(-0.5, 0, -4.37114e-08, 0, 0.5, 0, 4.37114e-08, 0, -0.5, 0, 0.447333, 0)
shape = SubResource("ConvexPolygonShape3D_2b05q")

[node name="CollisionShape3D4" type="CollisionShape3D" parent="."]
transform = Transform3D(-0.5, 0, -4.37114e-08, 0, 0.5, 0, 4.37114e-08, 0, -0.5, 0, 0.447333, 0)
shape = SubResource("ConvexPolygonShape3D_n5x8l")

[node name="CollisionShape3D3" type="CollisionShape3D" parent="."]
transform = Transform3D(-0.5, 0, -4.37114e-08, 0, 0.5, 0, 4.37114e-08, 0, -0.5, 0, 0.447333, 0)
shape = SubResource("ConvexPolygonShape3D_xt3sm")

[node name="CollisionShape3D2" type="CollisionShape3D" parent="."]
transform = Transform3D(-0.505706, 0, -4.52988e-08, 0, 0.3, 0, 7.63595e-08, 0, -0.3, 0, 0.494457, 0.0311186)
shape = SubResource("ConvexPolygonShape3D_sdmyv")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(-0.5, 0, -4.37114e-08, 0, 0.5, 0, 4.37114e-08, 0, -0.5, 0, 0.447333, 0)
shape = SubResource("ConvexPolygonShape3D_grk6a")

[node name="NavigationAgent3D" type="NavigationAgent3D" parent="."]
target_desired_distance = 2.5
debug_enabled = true

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_jyx25")
}

[node name="DespawnTimer" type="Timer" parent="."]
one_shot = true

[node name="AttackCooldown" type="Timer" parent="."]
wait_time = 5.0
one_shot = true

[node name="HeadCollider" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.10733, 0)
shape = SubResource("CapsuleShape3D_8vwep")

[connection signal="target_reached" from="NavigationAgent3D" to="." method="_on_navigation_agent_3d_target_reached"]
[connection signal="timeout" from="AttackCooldown" to="." method="_on_attack_cooldown_timeout"]
